generator client {
  provider      = "prisma-client-js"
  output        = "./generated"
  engineType    = "binary"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             BigInt                @id @unique
  username       String?
  discriminator  Int?
  nickname       String?
  joinedServerAt DateTime?
  messages       Message[]
  responses      AssociatesResponses[]
}

model Message {
  id        BigInt   @id @unique
  author    User     @relation(fields: [userId], references: [id])
  createdAt DateTime
  content   String
  userId    BigInt
  channelId BigInt
  guildId   BigInt
}

model AssociatesConfiguration {
  id             BigInt                @id @unique @default(autoincrement())
  category       BigInt?
  retryDelayDays Int?
  questions      AssociatesQuestions[]
}

model AssociatesQuestions {
  id              BigInt                  @id @unique @default(autoincrement())
  question        String
  answer          String
  configuration   AssociatesConfiguration @relation(fields: [id], references: [id])
  configurationId BigInt
  responses       AssociatesResponses[]
}

model AssociatesResponses {
  id         BigInt              @id @unique @default(autoincrement())
  answer     String
  userId     BigInt
  user       User                @relation(fields: [userId], references: [id])
  createdAt  DateTime
  updatedAt  DateTime
  questionId BigInt
  question   AssociatesQuestions @relation(fields: [questionId], references: [id])
}
